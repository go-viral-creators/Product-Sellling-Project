<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Simple E-Commerce</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 text-gray-800">

<header class="bg-white shadow sticky top-0 z-50">
  <div class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center">
    <h1 class="text-xl font-bold">ShopLite</h1>
    <button onclick="toggleCart()" class="relative">
      ðŸ›’
      <span id="cartCount" class="absolute -top-2 -right-2 bg-red-500 text-white text-xs px-2 rounded-full">0</span>
    </button>
  </div>
</header>

<main class="max-w-7xl mx-auto px-4 py-8">
  <h2 class="text-2xl font-semibold mb-6">Products</h2>
  <div id="productGrid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"></div>
</main>

<div id="productModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
  <div class="bg-white rounded-lg max-w-md w-full p-6">
    <img id="modalImage" class="w-full h-48 object-cover rounded">
    <h3 id="modalTitle" class="text-xl font-bold mt-4"></h3>
    <p id="modalDesc" class="text-gray-600 mt-2"></p>
    <p id="modalPrice" class="text-lg font-semibold mt-3"></p>
    <div class="flex gap-3 mt-4">
      <button onclick="addToCartFromModal()" class="flex-1 bg-blue-600 text-white py-2 rounded">Add to Cart</button>
      <button onclick="closeModal()" class="flex-1 bg-gray-300 py-2 rounded">Close</button>
    </div>
  </div>
</div>

<div id="cartDrawer" class="fixed top-0 right-0 w-80 h-full bg-white shadow-lg transform translate-x-full transition-transform z-50">
  <div class="p-4 flex justify-between items-center border-b">
    <h3 class="text-lg font-bold">Your Cart</h3>
    <button onclick="toggleCart()">âœ•</button>
  </div>

  <div id="cartItems" class="p-4 space-y-4 overflow-y-auto h-[70%]"></div>

  <div class="p-4 border-t">
    <p class="font-semibold mb-2">Total: â‚¹<span id="cartTotal">0</span></p>
    <button class="w-full bg-green-600 text-white py-2 rounded">Checkout</button>
  </div>
</div>

<script>
const products = [
  {id:1,title:"Wireless Headphones",price:2999,desc:"High quality wireless sound",img:"https://images.unsplash.com/photo-1518441902117-f6e7a5f6ec5f"},
  {id:2,title:"Smart Watch",price:4999,desc:"Track fitness and notifications",img:"https://images.unsplash.com/photo-1523275335684-37898b6baf30"},
  {id:3,title:"Bluetooth Speaker",price:1999,desc:"Portable powerful speaker",img:"https://images.unsplash.com/photo-1585386959984-a41552231693"},
  {id:4,title:"Gaming Mouse",price:1499,desc:"High precision gaming mouse",img:"https://images.unsplash.com/photo-1615751072497-5f5169febe17"}
]

let cart = []
let selectedProduct = null

const grid = document.getElementById("productGrid")

products.forEach(p=>{
  const card = document.createElement("div")
  card.className="bg-white rounded shadow p-4 flex flex-col"
  card.innerHTML=`
    <img src="${p.img}" class="h-40 object-cover rounded">
    <h3 class="font-semibold mt-3">${p.title}</h3>
    <p class="text-sm text-gray-600">${p.desc}</p>
    <p class="font-bold mt-2">â‚¹${p.price}</p>
    <button onclick="openModal(${p.id})" class="mt-auto bg-blue-600 text-white py-2 rounded mt-3">View</button>
  `
  grid.appendChild(card)
})

function openModal(id){
  selectedProduct = products.find(p=>p.id===id)
  document.getElementById("modalImage").src=selectedProduct.img
  document.getElementById("modalTitle").innerText=selectedProduct.title
  document.getElementById("modalDesc").innerText=selectedProduct.desc
  document.getElementById("modalPrice").innerText="â‚¹"+selectedProduct.price
  document.getElementById("productModal").classList.remove("hidden")
  document.getElementById("productModal").classList.add("flex")
}

function closeModal(){
  document.getElementById("productModal").classList.add("hidden")
}

function addToCartFromModal(){
  addToCart(selectedProduct.id)
  closeModal()
}

function addToCart(id){
  const item = cart.find(i=>i.id===id)
  if(item){ item.qty++ }
  else{
    const p = products.find(p=>p.id===id)
    cart.push({...p,qty:1})
  }
  updateCart()
}

function toggleCart(){
  document.getElementById("cartDrawer").classList.toggle("translate-x-full")
}

function updateCart(){
  const cartItems = document.getElementById("cartItems")
  cartItems.innerHTML=""
  let total = 0
  let count = 0

  cart.forEach(item=>{
    total += item.price * item.qty
    count += item.qty
    const div = document.createElement("div")
    div.className="flex justify-between items-center"
    div.innerHTML=`
      <div>
        <p class="font-semibold">${item.title}</p>
        <p class="text-sm">â‚¹${item.price}</p>
        <div class="flex gap-2 mt-1">
          <button onclick="changeQty(${item.id},-1)" class="px-2 bg-gray-200">âˆ’</button>
          <span>${item.qty}</span>
          <button onclick="changeQty(${item.id},1)" class="px-2 bg-gray-200">+</button>
        </div>
      </div>
      <button onclick="removeItem(${item.id})">ðŸ—‘</button>
    `
    cartItems.appendChild(div)
  })

  document.getElementById("cartTotal").innerText=total
  document.getElementById("cartCount").innerText=count
}

function changeQty(id,delta){
  const item = cart.find(i=>i.id===id)
  item.qty += delta
  if(item.qty<=0) cart = cart.filter(i=>i.id!==id)
  updateCart()
}

function removeItem(id){
  cart = cart.filter(i=>i.id!==id)
  updateCart()
}
</script>

</body>
</html>